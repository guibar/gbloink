<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gbloink!</title>
    
    <script src="https://g200kg.github.io/webaudio-tinysynth/webaudio-tinysynth.js"></script>
    
    <script defer src="gbloink.js"></script>
    <link href="gbloink.css" rel="stylesheet" type="text/css">  
    
</head>

<body>
    <nav>
        <img src="img/gbloinklogo.png" alt="gbloink!">

        <a href="http://gbloink.com">Home</a> | 
        <a href="http://thoughtstorms.info/view/gbloink">Gbloink! on ThoughtStorms</a>
    </nav>
    
    <header>
        <h2>Gbloink! ... in the browser!</h2>
    </header>
    
    <main>
    <section id="play-area">
        <canvas id="canvasId" width="600" height="400"></canvas>
    </section>
    <section id="controls">
        <div id="controls">
            <h4>Balls</h4>
            <div id="redcontrol">
                <label>Speed:</label>
                <canvas id="redball_speed" class="control_bar" width="170" height="20"></canvas>
                <label>Volume:</label>
                <canvas id="redball_volume" class="control_bar" width="170" height="20"></canvas>
                <label>Instrument:</label>
                <canvas id="redball_instrument" class="control_bar" width="170" height="20"></canvas>
                <label>Delay:</label>
                <canvas id="redball_delay" class="control_bar" width="170" height="20"></canvas>
            </div>
            <div id="greencontrol">
                <label>Speed:</label>
                <canvas id="greenball_speed" class="control_bar" width="170" height="20"></canvas>
                <label>Volume:</label>
                <canvas id="greenball_volume" class="control_bar" width="170" height="20"></canvas>
                <label>Instrument:</label>
                <canvas id="greenball_instrument" class="control_bar" width="170" height="20"></canvas>
                <label>Delay:</label>
                <canvas id="greenball_delay" class="control_bar" width="170" height="20"></canvas>
            </div>
            <div id="bluecontrol">
                <label>Speed:</label>
                <canvas id="blueball_speed" class="control_bar" width="170" height="20"></canvas>
                <label>Volume:</label>
                <canvas id="blueball_volume" class="control_bar" width="170" height="20"></canvas>
                <label>Instrument:</label>
                <canvas id="blueball_instrument" class="control_bar" width="170" height="20"></canvas>
                <label>Delay:</label>
                <canvas id="blueball_delay" class="control_bar" width="170" height="20"></canvas>
            </div>
        </div>
        
        <h4>Control</h4>
        <div>
            <button id="startButton"><img src="img/play.png" /></button>
            <button id="stopButton"><img src="img/pause.png" /></button>
        </div>
        <br />&nbsp;<br />
        <div>
            <input type="radio" checked name="scale" value="major" onClick="noteCalculator.setCurrent('major');" />Major<br />
            <input type="radio" name="scale" value="minor" onClick="noteCalculator.setCurrent('minor');" />Minor<br />
            <input type="radio" name="scale" value="diminished" onClick="noteCalculator.setCurrent('diminished');" />Diminished<br />
            <input type="radio" name="scale" value="pent1" onClick="noteCalculator.setCurrent('pent1');">Pentatonic 1<br />
            <input type="radio" name="scale" value="pent2" onClick="noteCalculator.setCurrent('pent2');">Pentatonic 2<br />
            <input type="radio" name="scale" value="arab" onClick="noteCalculator.setCurrent('arab');" />Arab<br />
            <input type="radio" name="scale" value="gypsy" onClick="noteCalculator.setCurrent('gypsy');" />Gypsy<br />
            <input type="radio" name="scale" value="debussy" onClick="noteCalculator.setCurrent('debussy');" />Debussy<br />
            <input type="radio" name="scale" value="chromatic" onClick="noteCalculator.setCurrent('chromatic');" />Chromatic<br />
        </div>
    </main>

    <footer>
        <section id="about">
            <h2>About</h2>
            <p>
                Gbloink! is an interactive musical game. As the balls move around the screen and collide with the walls and blocks, they play musical notes. You can control the speed of each ball, and the instrument, volume and note-length of each corresponding synth. 
            </p>
            <p>    
                And you can add and remove blocks by clicking on the canvas.
            </p>
            <p>Please note, this is pretty experimental. </p>
            <h3>Further Reading</h3>
            <ul>
                <li><a href="http://gbloink.com">Current Gbloink! site</a></li>
                <li>More about Gbloink! <a href="http://thoughtstorms.info/view/WhyGbloinkIsInteresting">on my wiki</a>.</li>
                <li>Source <a href="https://github.com/interstar/gbloink">on GitHub</a></li>
                <li>The new multi-timbral Gbloink! is made possible by <a href="https://github.com/g200kg/webaudio-tinysynth">WebAudioTinySynth</a></li>
                <li>and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a></li>
            </ul>
            <p>Â© Synaesmedia 1997-2023, released under GPL 3.0</p>
        </section>
    </footer>
 

    <script>
        var game;

        window.onload = function () {
            game = new Game("canvasId", MIDI);
            noteCalculator.setCurrent("major");

 
            // You can add any other initialization code here
            // For example, setting up the TinySynth library

            intervalId = setInterval(() => game.next(), 50);

            document.getElementById('startButton').addEventListener('click', function () {
                // Implement your start game logic here
                clearInterval(intervalId);
                intervalId = setInterval(() => game.next(), 50);
            });

            document.getElementById('stopButton').addEventListener('click', function () {
                // Implement your stop game logic here
                clearInterval(intervalId);
            });
        };
    </script>
</body>

</html>

