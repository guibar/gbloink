<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gbloink!</title>
    
    <script src="https://g200kg.github.io/webaudio-tinysynth/webaudio-tinysynth.js"></script>
    
 
    <link href="gbloink.css" rel="stylesheet" type="text/css">  
    
</head>

<body>
  <div id="container">
    <nav>
        <img src="img/gbloinklogo.png" alt="gbloink!">

        <a href="http://gbloink.com">Home</a> | 
        <a href="http://thoughtstorms.info/view/Gbloink">Gbloink! on ThoughtStorms</a>
    </nav>
    
    <header>
        <h2>Gbloink! ... in the browser!</h2>
    </header>
    
    <main>
    
        <section id="play-area">
            <canvas id="canvasId" width="800" height="400"></canvas>

        </section>
            
        <section id="controls">
            <div>
                <button id="startButton"><img src="img/play.png" /></button>
                <button id="stopButton"><img src="img/pause.png" /></button>
            </div>
            <table>
                <tr>
                    <th>Speed</th>
                    <th>Instrument</th>
                    <th>Volume</th>                    
                    <th>Decay</th>
                </tr>
                <tr>
                    <td class="red"><canvas id="redball_speed" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="red"><canvas id="redball_instrument" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="red"><canvas id="redball_volume" class="control_bar" width="170" height="20"></canvas></td>            
                    <td class="red"><canvas id="redball_delay" class="control_bar" width="170" height="20"></canvas></td>
                </tr>
                <tr>
                    <td class="green"><canvas id="greenball_speed" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="green"><canvas id="greenball_instrument" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="green"><canvas id="greenball_volume" class="control_bar" width="170" height="20"></canvas></td>                    
                    <td class="green"><canvas id="greenball_delay" class="control_bar" width="170" height="20"></canvas></td>
                </tr>
                <tr>
                    <td class="blue"><canvas id="blueball_speed" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="blue"><canvas id="blueball_instrument" class="control_bar" width="170" height="20"></canvas></td>
                    <td class="blue"><canvas id="blueball_volume" class="control_bar" width="170" height="20"></canvas></td>                    
                    <td class="blue"><canvas id="blueball_delay" class="control_bar" width="170" height="20"></canvas></td>
                </tr>

            </table>

            <br />&nbsp;<br />
            <div>
                <input type="radio" checked name="scale" value="major" onClick="noteCalculator.setCurrent('major');" />Major<br />
                <input type="radio" name="scale" value="minor" onClick="noteCalculator.setCurrent('minor');" />Minor<br />
                <input type="radio" name="scale" value="diminished" onClick="noteCalculator.setCurrent('diminished');" />Diminished<br />
                <input type="radio" name="scale" value="pent1" onClick="noteCalculator.setCurrent('pent1');">Pentatonic 1<br />
                <input type="radio" name="scale" value="pent2" onClick="noteCalculator.setCurrent('pent2');">Pentatonic 2<br />
                <input type="radio" name="scale" value="arab" onClick="noteCalculator.setCurrent('arab');" />Arab<br />
                <input type="radio" name="scale" value="gypsy" onClick="noteCalculator.setCurrent('gypsy');" />Gypsy<br />
                <input type="radio" name="scale" value="debussy" onClick="noteCalculator.setCurrent('debussy');" />Debussy<br />
                <input type="radio" name="scale" value="chromatic" onClick="noteCalculator.setCurrent('chromatic');" />Chromatic<br />
            </div>
        </section>
        </main>

    <footer>
        <section id="about">
            <h2>About</h2>
            <p>
                Gbloink! is an interactive musical game. As the balls move around the screen and collide with the walls and blocks, they play musical notes. You can control the speed of each ball, and the instrument, volume and note-length of each corresponding synth. 
            </p>
            <p>    
                And you can add and remove blocks by clicking on the canvas.
            </p>
            
            <p>Click along the coloured bars to change the parameter. Further to the left is "lower" (eg. slower for speed, quieter for volume etc.) Click somewhere along the "Instrument" bar chooses which of the 127 GM sounds the ball plays.</p>
            <p>Please note, this is all pretty experimental. </p>
            <h3>Further Reading</h3>
            <ul>
                <li><a href="http://gbloink.com">Current Gbloink! site</a></li>
                <li>More about Gbloink! <a href="http://thoughtstorms.info/view/WhyGbloinkIsInteresting">on my wiki</a>.</li>
                <li>Source <a href="https://github.com/interstar/gbloink">on GitHub</a></li>
                <li>The new multi-timbral Gbloink! is made possible by <a href="https://github.com/g200kg/webaudio-tinysynth">WebAudioTinySynth</a></li>
                <li>and <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API">Web Audio API</a></li>
            </ul>
            <p>Â© Synaesmedia 1997-2023, released under GPL 3.0</p>
        </section>
    </footer>
 
    <script src="gbloink.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var game = new Game("canvasId", MIDI);
            noteCalculator.setCurrent("major");

            // You can add any other initialization code here
            // For example, setting up the TinySynth library

            var intervalId;
            intervalId = setInterval(() => game.next(), 50);
            document.getElementById('startButton').addEventListener('click', function () {
                // Implement your start game logic here
                clearInterval(intervalId);
                intervalId = setInterval(() => game.next(), 50);
            });

            document.getElementById('stopButton').addEventListener('click', function () {
                // Implement your stop game logic here
                clearInterval(intervalId);
            });
        });
    </script>
  </div>    
</body>

</html>

